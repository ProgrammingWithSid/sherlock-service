# =============================================================================
# Sherlock Service Environment Variables
# =============================================================================
# Copy this file to backend/.env and fill in your actual values
# cp env.example backend/.env

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3000
NODE_ENV=development
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
BASE_URL=http://localhost:3000

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string
# Format: postgres://username:password@host:port/database?sslmode=disable
DATABASE_URL=postgres://sherlock:sherlock@localhost:5432/sherlock?sslmode=disable

# =============================================================================
# Redis Configuration
# =============================================================================
# Redis connection string
# Format: redis://host:port or redis://:password@host:port
REDIS_URL=redis://localhost:6379

# =============================================================================
# GitHub App Configuration
# =============================================================================
# GitHub App ID (found in your GitHub App settings)
GITHUB_APP_ID=123456

# Path to GitHub App private key file (PEM format)
# Download from GitHub App settings -> Private keys
GITHUB_PRIVATE_KEY_PATH=./github-app-private-key.pem

# GitHub Webhook Secret
# Set this in your GitHub App settings -> Webhook -> Secret
# Used to verify webhook payloads
GITHUB_WEBHOOK_SECRET=your_webhook_secret_here

# =============================================================================
# GitLab Configuration (Optional)
# =============================================================================
# GitLab personal access token (if using GitLab integration)
GITLAB_TOKEN=

# =============================================================================
# AI Provider Configuration
# =============================================================================
# AI provider: "claude" or "openai"
AI_PROVIDER=claude

# Claude API Key (from Anthropic)
# Get your API key from: https://console.anthropic.com/
CLAUDE_API_KEY=sk-ant-api03-...

# OpenAI API Key (if using OpenAI)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...

# =============================================================================
# Storage Configuration
# =============================================================================
# Path where repositories will be cloned
REPOS_PATH=/tmp/sherlock-repos

# Maximum age of cloned repositories in hours (before cleanup)
MAX_REPO_AGE_HOURS=24

# =============================================================================
# Review Limits & Configuration
# =============================================================================
# Maximum number of files to review per PR
MAX_FILES_PER_REVIEW=100

# Maximum number of concurrent reviews
MAX_CONCURRENT_REVIEWS=5

# Review timeout in milliseconds (5 minutes default)
REVIEW_TIMEOUT_MS=300000

# =============================================================================
# Cache Configuration
# =============================================================================
# Review cache TTL in hours
REVIEW_CACHE_TTL_HOURS=24

# =============================================================================
# Feature Flags
# =============================================================================
# Enable incremental reviews (only review changed files)
ENABLE_INCREMENTAL_REVIEWS=true

# Enable codebase indexing (requires Rust indexer)
ENABLE_CODEBASE_INDEXING=false

# =============================================================================
# Rust Indexer Configuration (Optional)
# =============================================================================
# URL for Rust indexer microservice
# Leave empty if not using Rust indexer
RUST_INDEXER_URL=http://localhost:8081

# =============================================================================
# Frontend Configuration
# =============================================================================
# API base URL for frontend (Vite environment variable)
# This should be set in frontend/.env or frontend/.env.local
# VITE_API_BASE_URL=http://localhost:3000

# =============================================================================
# Docker/ECR Configuration (for deployment)
# =============================================================================
# ECR registry URL (for Docker Compose with ECR images)
# Format: ACCOUNT_ID.dkr.ecr.REGION.amazonaws.com
# ECR_REGISTRY=123456789012.dkr.ecr.ap-south-1.amazonaws.com

